# Unity-VideoPlay
卒業制作用のUnityプロジェクトVideoPlayのローカルリポジトリ

以降卒業論文の下書き

# タイトル：スマートフォン向けリズムゲームプレイヤーのためのハンドトラッキングアプリ制作

# 章立て
0. 目次
1. 序論
2. 関連研究と状況把握
3. 制作内容
    1. 制作対象と制作手法
    1. 制作の環境
        1. ハードウェア
        2. ソフトウェア
    1. 制作物の仕様
        1. アプリのモード
            - 記録モード
            - 再生モード
        1. 2つのモードに共通する仕様
            - ハンドモデル
            - 視点移動（カメラ操作）
        1. 記録モードの機能
            - ハンドモデルの位置と回転のキャリブレーション
            - ハンドモデルの関節の回転のキャリブレーション
            - スマホ/タブレット端末のミラーリング
            - モーションデータの記録と保存
            - スマホ/タブレット端末の画面収録（未実装）
        1. 再生モードの機能
            - 記録モードで保存したモーションデータのロード
            - 外部からインポートした動画データのロード
            - モーションデータの再生と動画データの再生の同期
            - シークバーの表示
            - シークバードラッグ時のプレビュー
            - スキップ
            - 再生速度倍率変更
    1. 各仕様の実装方法
        1. 2つのモード
        1. ハンドモデルとリンク機構
        1. 視点移動
        2. ハンドモデルの位置と回転のキャリブレーション
        3. ハンドモデルの関節の回転のキャリブレーション
        4. スマホ/タブレット端末のミラーリング
        5. モーションデータの記録と保存
        6. 記録モードで保存したモーションデータのロード
        7. 外部からインポートした動画データのロード
        8. モーションデータの再生と動画データの再生の同期
        9. シークバーの表示
        10. シークバードラッグ時のプレビュー
        11. スキップ
        12. 再生速度倍率変更
4. 制作結果
5. 結果の分析・評価と議論
6. 結論と今後の見直し
7. 参考文献
8. 謝辞
9. ソースコード

# 制作物の仕様
## 1. アプリのモード
本アプリは大きく分けて記録モードと再生モードの2つモードを有する。以下、各モードの概要である。
- 記録モード：モーションデータと動画を記録するなどの機能を持ち、リズムゲームを実際にプレイするときに使用するモード。
- 再生モード：記録モードで記録したモーションデータと動画を再生するなどの機能を持ち、プレイ動画を観察するときに使用するモード。

## 2. 2つのモードに共通する仕様
記録モードおよび再生モードに共通する仕様を以下に記す。
1. ハンドモデル  
記録モードおよび再生モードで動かす手の3Dモデル（以後ハンドモデル）の仕様について説明する。
    1. モデルのマテリアル  
    リズムゲーム画面がハンドモデルによって隠れて見えなくなることを防ぐため、デフォルトのマテリアルは無地の半透明にする。記録モードにて記録中にLeapMotionからの検知が外れている間のフレームでは、特別なマテリアルを割り当てることによって検知されていないことを知らせるようにする。（左：通常マテリアル、右：エラーマテリアル）
    ![Materials_of_HandModel](https://user-images.githubusercontent.com/111300162/210245070-9d2e3354-d55f-4eb0-8f63-f777b0750f2f.png)

    2. 関節の階層構造  
    ハンドモデルは一般的なキャラクターモデルにも使われるリンク機構を採用した階層構造になるようオブジェクトを配置する。具体的には、手のひらを最上層におき、その子として、各指の第三関節を配置する。すべての指はそれぞれの第三関節、第二関節、第一関節の順に親、子、孫の関係になるような階層構造とする。  
    以下、片手の全オブジェクトの階層構造である。オブジェクト名は [手の骨と関節](http://www.yuzawaseikei.com/shikkan/te.htm) を参照。
    ~~~
    手のひら
    ├── 親指第三関節
    │   ├── CM関節
    │   ├── 中手骨
    │   └── 親指第二関節
    │       ├── MP関節
    │       ├── 基節骨
    │       └── 親指第一関節
    │           ├── IP関節
    │           ├── 末節骨
    │           └── 先端
    ├── 人差し指第三関節
    │   ├── MP関節
    │   ├── 基節骨
    │   └── 人差し指第二関節
    │       ├── PIP関節
    │       ├── 中節骨
    │       └── 人差し指第一関節
    │           ├── DIP関節
    │           ├── 末節骨
    │           └── 先端
    ├── 中指第三関節
    │   ├── MP関節
    │   ├── 基節骨
    │   └── 中指第二関節
    │       ├── PIP関節
    │       ├── 中節骨
    │       └── 中指第一関節
    │           ├── DIP関節
    │           ├── 末節骨
    │           └── 先端
    ├── 薬指第三関節
    │   ├── MP関節
    │   ├── 基節骨
    │   └── 薬指第二関節
    │       ├── PIP関節
    │       ├── 中節骨
    │       └── 薬指第一関節
    │           ├── DIP関節
    │           ├── 末節骨
    │           └── 先端
    └── 子指第三関節
        ├── MP関節
        ├── 基節骨
        └── 子指第二関節
            ├── PIP関節
            ├── 中節骨
            └── 子指第一関節
                ├── DIP関節
                ├── 末節骨
                └── 先端
    ~~~
2. 視点移動（カメラ操作）
記録モードおよび再生モードに共通する仕様を以下に記す。
